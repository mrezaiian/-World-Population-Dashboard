<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç World Population Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            color: #2c3e50;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .dashboard-header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            margin-bottom: 20px;
            border: none;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .card-header {
            background-color: white;
            border-bottom: 1px solid #eaeaea;
            font-weight: 600;
            padding: 15px 20px;
            border-radius: 10px 10px 0 0 !important;
        }
        .country-tag {
            display: inline-flex;
            align-items: center;
            margin: 5px;
            padding: 5px 12px;
            background-color: #f1f8ff;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #d0e2ff;
        }
        .country-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 7px;
        }
        .chart-container {
            padding: 15px;
            min-height: 400px;
        }
        .controls-card {
            height: 100%;
        }
        .summary-box {
            max-height: 300px;
            overflow-y: auto;
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        .btn-action {
            margin: 5px;
            font-weight: 500;
        }
        .highlight-box {
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            border-left: 4px solid #0d6efd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header class="dashboard-header text-center">
        <div class="container">
            <h1 class="display-4 fw-bold">üåç World Population Dashboard</h1>
            <p class="lead">Interactive visualization of global population trends (1960‚Äì2023)</p>
        </div>
    </header>

    <div class="container">
        <div class="highlight-box">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h5>üìä Explore Global Population Data</h5>
                    <p class="mb-0">Select countries from the list to compare their population trends over time. Data is simulated for demonstration purposes.</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <button class="btn btn-outline-primary" onclick="simulateDataLoad()">
                        üìÅ Simulate Data Load
                    </button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-4">
                <div class="card controls-card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>üìä Controls</span>
                        <div>
                            <button class="btn btn-sm btn-primary btn-action" onclick="selectAll()">Select All</button>
                            <button class="btn btn-sm btn-secondary btn-action" onclick="clearAll()">Clear All</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Filter Countries:</label>
                            <input type="text" class="form-control" id="country-filter" placeholder="Type to filter..." onkeyup="filterCountries()">
                        </div>
                        
                        <label class="form-label">Select Countries:</label>
                        <div id="country-list" style="max-height: 200px; overflow-y: auto;" class="mb-3">
                            <!-- Country list will be generated here -->
                        </div>
                        
                        <div id="selected-countries-display" class="d-flex flex-wrap">
                            <!-- Selected countries will appear here -->
                        </div>
                        
                        <h5 class="mt-4">üìà Data Summary</h5>
                        <div id="data-summary" class="summary-box">
                            Select countries to see data summary
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">üìà Population Trends Over Time</div>
                    <div class="chart-container" id="population-chart"></div>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">üìä Population Distribution (2023)</div>
                            <div class="chart-container" id="pie-chart"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">üöÄ Growth Since 1960 (%)</div>
                            <div class="chart-container" id="growth-chart"></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">üé¨ Animated Population Growth (1960-2023)</div>
                    <div class="chart-container" id="animated-chart"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="mt-5 py-3 text-center text-muted">
        <div class="container">
            <p>World Population Dashboard &copy; 2023 | Simulated data for demonstration purposes</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ÿØÿßÿØŸá‚ÄåŸáÿß€å ŸÜŸÖŸàŸÜŸá (ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ¥ÿØŸá)
        let populationData = {};
        const availableCountries = [
            "United States", "China", "India", "Brazil", "Nigeria", 
            "Indonesia", "Pakistan", "Bangladesh", "Russia", "Mexico",
            "Japan", "Ethiopia", "Philippines", "Egypt", "Vietnam",
            "DR Congo", "Turkey", "Iran", "Germany", "Thailand"
        ];

        // ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿ´ÿßÿ®ÿ™ ÿ®ÿ±ÿß€å Ÿáÿ± ⁄©ÿ¥Ÿàÿ±
        const countryColors = {
            "United States": "#1f77b4",
            "China": "#ff7f0e",
            "India": "#2ca02c",
            "Brazil": "#d62728",
            "Nigeria": "#9467bd",
            "Indonesia": "#8c564b",
            "Pakistan": "#e377c2",
            "Bangladesh": "#7f7f7f",
            "Russia": "#bcbd22",
            "Mexico": "#17becf",
            "Japan": "#aec7e8",
            "Ethiopia": "#ffbb78",
            "Philippines": "#98df8a",
            "Egypt": "#ff9896",
            "Vietnam": "#c5b0d5",
            "DR Congo": "#c49c94",
            "Turkey": "#f7b6d2",
            "Iran": "#dbdb8d",
            "Germany": "#9edae5",
            "Thailand": "#393b79"
        };

        // ⁄©ÿ¥Ÿàÿ±Ÿáÿß€å ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá
        let selectedCountries = ["United States", "China", "India", "Brazil", "Nigeria"];

        // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿØÿßÿØŸá ÿßÿ≤ CSV
        function simulateDataLoad() {
            // ÿß€åÿ¨ÿßÿØ ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ¥ÿØŸá ÿ®ÿ±ÿß€å ŸáŸÖŸá ⁄©ÿ¥Ÿàÿ±Ÿáÿß
            availableCountries.forEach(country => {
                // ÿ¨ŸÖÿπ€åÿ™ ÿßŸàŸÑ€åŸá ÿØÿ± ÿ≥ÿßŸÑ 1960
                let basePopulation;
                if (country === "China") basePopulation = 667070000;
                else if (country === "India") basePopulation = 449480000;
                else if (country === "United States") basePopulation = 180671000;
                else basePopulation = Math.floor(Math.random() * 300000000) + 10000000;
                
                populationData[country] = {};
                
                // ÿß€åÿ¨ÿßÿØ ÿØÿßÿØŸá ÿ®ÿ±ÿß€å Ÿáÿ± ÿ≥ÿßŸÑ ÿßÿ≤ 1960 ÿ™ÿß 2023
                for (let year = 1960; year <= 2023; year++) {
                    // ÿ±ÿ¥ÿØ ÿ¨ŸÖÿπ€åÿ™ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ≥ÿßŸÑ (ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ¥ÿØŸá)
                    const yearsFrom1960 = year - 1960;
                    const growthRate = 0.01 + (Math.random() * 0.03); // ŸÜÿ±ÿÆ ÿ±ÿ¥ÿØ ÿ®€åŸÜ 1% ÿ™ÿß 4%
                    const population = Math.floor(basePopulation * Math.pow(1 + growthRate, yearsFrom1960));
                    
                    populationData[country][year] = population;
                }
            });
            
            // ÿ®Ÿá ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÑ€åÿ≥ÿ™ ⁄©ÿ¥Ÿàÿ±Ÿáÿß ÿØÿ± ÿ±ÿßÿ®ÿ∑ ⁄©ÿßÿ±ÿ®ÿ±€å
            updateCountryList();
            
            // ÿ®Ÿá ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸáŸÖŸá ŸÜŸÖŸàÿØÿßÿ±Ÿáÿß
            updateAllCharts();
            
            // ŸÜŸÖÿß€åÿ¥ Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™
            alert("Data successfully loaded! Now displaying population data for 20 countries.");
        }

        // ÿ®Ÿá ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÑ€åÿ≥ÿ™ ⁄©ÿ¥Ÿàÿ±Ÿáÿß ÿØÿ± ⁄©ŸÜÿ™ÿ±ŸÑ‚ÄåŸáÿß
        function updateCountryList() {
            const countryList = document.getElementById('country-list');
            countryList.innerHTML = '';
            
            availableCountries.forEach(country => {
                const div = document.createElement('div');
                div.className = 'form-check';
                
                div.innerHTML = `
                    <input class="form-check-input" type="checkbox" value="${country}" 
                        id="check-${country}" ${selectedCountries.includes(country) ? 'checked' : ''}
                        onchange="toggleCountry(this)">
                    <label class="form-check-label" for="check-${country}">
                        ${country}
                    </label>
                `;
                
                countryList.appendChild(div);
            });
        }

        // ŸÅ€åŸÑÿ™ÿ± ⁄©ÿ±ÿØŸÜ ⁄©ÿ¥Ÿàÿ±Ÿáÿß
        function filterCountries() {
            const filterText = document.getElementById('country-filter').value.toLowerCase();
            const checkboxes = document.querySelectorAll('#country-list .form-check');
            
            checkboxes.forEach(checkbox => {
                const label = checkbox.querySelector('.form-check-label');
                const countryName = label.textContent.toLowerCase();
                
                if (countryName.includes(filterText)) {
                    checkbox.style.display = 'block';
                } else {
                    checkbox.style.display = 'none';
                }
            });
        }

        // ÿ™ÿ∫€å€åÿ± Ÿàÿ∂ÿπ€åÿ™ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ÿ¥Ÿàÿ±
        function toggleCountry(checkbox) {
            const country = checkbox.value;
            
            if (checkbox.checked) {
                if (!selectedCountries.includes(country)) {
                    selectedCountries.push(country);
                }
            } else {
                selectedCountries = selectedCountries.filter(c => c !== country);
            }
            
            updateAllCharts();
        }

        // ÿ™ÿßÿ®ÿπ ÿ®ÿ±ÿß€å ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸáŸÖŸá ŸÜŸÖŸàÿØÿßÿ±Ÿáÿß
        function updateAllCharts() {
            updateSelectedCountriesDisplay();
            updateDataSummary();
            updatePopulationChart();
            updatePieChart();
            updateGrowthChart();
            updateAnimatedChart();
        }

        // ŸÜŸÖÿß€åÿ¥ ⁄©ÿ¥Ÿàÿ±Ÿáÿß€å ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá
        function updateSelectedCountriesDisplay() {
            const displayDiv = document.getElementById('selected-countries-display');
            displayDiv.innerHTML = '';
            
            if (selectedCountries.length === 0) {
                displayDiv.innerHTML = '<div class="text-muted">No countries selected</div>';
                return;
            }
            
            selectedCountries.forEach(country => {
                const colorBox = document.createElement('div');
                colorBox.className = 'country-color';
                colorBox.style.backgroundColor = countryColors[country];
                
                const tag = document.createElement('div');
                tag.className = 'country-tag';
                tag.appendChild(colorBox);
                tag.appendChild(document.createTextNode(country));
                
                // ÿØ⁄©ŸÖŸá ÿ≠ÿ∞ŸÅ
                const removeBtn = document.createElement('button');
                removeBtn.type = 'button';
                removeBtn.className = 'btn-close ms-2';
                removeBtn.style.fontSize = '0.6rem';
                removeBtn.onclick = function() {
                    selectedCountries = selectedCountries.filter(c => c !== country);
                    document.getElementById(`check-${country}`).checked = false;
                    updateAllCharts();
                };
                
                tag.appendChild(removeBtn);
                displayDiv.appendChild(tag);
            });
        }

        // ÿÆŸÑÿßÿµŸá ÿØÿßÿØŸá‚ÄåŸáÿß
        function updateDataSummary() {
            const summaryDiv = document.getElementById('data-summary');
            
            if (selectedCountries.length === 0) {
                summaryDiv.innerHTML = "Select countries to see data summary";
                return;
            }
            
            let html = '';
            selectedCountries.forEach(country => {
                if (!populationData[country]) return;
                
                const pop1960 = populationData[country][1960];
                const pop2023 = populationData[country][2023];
                const growth = ((pop2023 - pop1960) / pop1960) * 100;
                
                html += `
                    <div class="mb-2 pb-2 border-bottom">
                        <strong>${country}:</strong>
                        <div class="ms-3">
                            <div>1960: ${pop1960.toLocaleString()}</div>
                            <div>2023: ${pop2023.toLocaleString()}</div>
                            <div class="fw-bold ${growth >= 0 ? 'text-success' : 'text-danger'}">
                                Growth: ${growth.toFixed(1)}%
                            </div>
                        </div>
                    </div>
                `;
            });
            
            summaryDiv.innerHTML = html;
        }

        // ŸÜŸÖŸàÿØÿßÿ± ÿ¨ŸÖÿπ€åÿ™ ÿØÿ± ÿ∑ŸàŸÑ ÿ≤ŸÖÿßŸÜ
        function updatePopulationChart() {
            if (Object.keys(populationData).length === 0) {
                document.getElementById('population-chart').innerHTML = '<div class="text-center p-5">Please load data first</div>';
                return;
            }
            
            if (selectedCountries.length === 0) {
                document.getElementById('population-chart').innerHTML = '<div class="text-center p-5">Please select countries</div>';
                return;
            }
            
            const traces = selectedCountries.map(country => {
                const years = Object.keys(populationData[country]).map(Number).sort((a, b) => a - b);
                const values = years.map(year => populationData[country][year]);
                
                return {
                    x: years,
                    y: values,
                    name: country,
                    mode: 'lines+markers',
                    line: { width: 3, color: countryColors[country] },
                    marker: { size: 6, color: countryColors[country] }
                };
            });
            
            const layout = {
                xaxis: { title: "Year", tickmode: 'linear', dtick: 10 },
                yaxis: { title: "Population" },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                hovermode: 'closest',
                legend: { orientation: "h", yanchor: "bottom", y: 1.02, xanchor: "right", x: 1 }
            };
            
            Plotly.newPlot('population-chart', traces, layout);
        }

        // ŸÜŸÖŸàÿØÿßÿ± Ÿæÿß€å (ÿ™Ÿàÿ≤€åÿπ ÿ¨ŸÖÿπ€åÿ™)
        function updatePieChart() {
            if (Object.keys(populationData).length === 0) {
                document.getElementById('pie-chart').innerHTML = '<div class="text-center p-5">Please load data first</div>';
                return;
            }
            
            if (selectedCountries.length === 0) {
                document.getElementById('pie-chart').innerHTML = '<div class="text-center p-5">Please select countries</div>';
                return;
            }
            
            const values = selectedCountries.map(country => populationData[country][2023]);
            const labels = selectedCountries;
            const colors = selectedCountries.map(country => countryColors[country]);
            
            const data = [{
                values: values,
                labels: labels,
                type: 'pie',
                hole: 0.4,
                marker: { colors: colors },
                textinfo: 'label+percent',
                textposition: 'outside',
                hoverinfo: 'label+value+percent'
            }];
            
            const layout = {
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                showlegend: false,
                margin: { t: 0, b: 0, l: 0, r: 0 }
            };
            
            Plotly.newPlot('pie-chart', data, layout);
        }

        // ŸÜŸÖŸàÿØÿßÿ± ÿ±ÿ¥ÿØ
        function updateGrowthChart() {
            if (Object.keys(populationData).length === 0) {
                document.getElementById('growth-chart').innerHTML = '<div class="text-center p-5">Please load data first</div>';
                return;
            }
            
            if (selectedCountries.length === 0) {
                document.getElementById('growth-chart').innerHTML = '<div class="text-center p-5">Please select countries</div>';
                return;
            }
            
            const growthValues = selectedCountries.map(country => {
                const pop1960 = populationData[country][1960];
                const pop2023 = populationData[country][2023];
                return ((pop2023 - pop1960) / pop1960) * 100;
            });
            
            const colors = selectedCountries.map(country => countryColors[country]);
            
            const data = [{
                x: growthValues,
                y: selectedCountries,
                type: 'bar',
                orientation: 'h',
                marker: { color: colors },
                text: growthValues.map(v => v.toFixed(1) + '%'),
                textposition: 'auto'
            }];
            
            const layout = {
                xaxis: { title: "Growth Since 1960 (%)" },
                yaxis: { title: "" },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white'
            };
            
            Plotly.newPlot('growth-chart', data, layout);
        }

        // ŸÜŸÖŸàÿØÿßÿ± ŸÖÿ™ÿ≠ÿ±⁄©
        function updateAnimatedChart() {
            if (Object.keys(populationData).length === 0) {
                document.getElementById('animated-chart').innerHTML = '<div class="text-center p-5">Please load data first</div>';
                return;
            }
            
            if (selectedCountries.length === 0) {
                document.getElementById('animated-chart').innerHTML = '<div class="text-center p-5">Please select countries</div>';
                return;
            }
            
            // ÿß€åÿ¨ÿßÿØ ÿØÿßÿØŸá‚ÄåŸáÿß€å ŸÖÿµŸÜŸàÿπ€å ÿ®ÿ±ÿß€å ÿ≥ÿßŸÑ‚ÄåŸáÿß€å ÿ®€åŸÜ 1960 ÿ™ÿß 2023
            const frames = [];
            for (let year = 1960; year <= 2023; year++) {
                const dataForYear = selectedCountries.map(country => {
                    return {
                        x: [year],
                        y: [populationData[country][year]],
                        mode: 'markers',
                        marker: {
                            size: Math.sqrt(populationData[country][year]) / 10000,
                            color: countryColors[country]
                        },
                        name: country,
                        text: [`${country}: ${populationData[country][year].toLocaleString()}`],
                        hoverinfo: 'text'
                    };
                });
                
                frames.push({
                    name: year.toString(),
                    data: dataForYear
                });
            }
            
            // ÿß€åÿ¨ÿßÿØ ŸÜŸÖŸàÿØÿßÿ± ÿßŸàŸÑ€åŸá
            const initialData = frames[0].data;
            
            const layout = {
                xaxis: { range: [1960, 2023], title: "Year" },
                yaxis: { range: [0, 1500000000], title: "Population" },
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                updatemenus: [{
                    buttons: [
                        {
                            args: [null, { frame: { duration: 50, redraw: false }, fromcurrent: true }],
                            label: 'Play',
                            method: 'animate'
                        },
                        {
                            args: [[null], { frame: { duration: 0, redraw: false }, mode: 'immediate' }],
                            label: 'Pause',
                            method: 'animate'
                        }
                    ],
                    direction: 'left',
                    pad: { r: 10, t: 87 },
                    showactive: false,
                    type: 'buttons',
                    x: 0.1,
                    xanchor: 'right',
                    y: 0,
                    yanchor: 'top'
                }]
            };
            
            Plotly.newPlot('animated-chart', initialData, layout).then(() => {
                Plotly.addFrames('animated-chart', frames);
            });
        }

        // ÿßŸÜÿ™ÿÆÿßÿ® ŸáŸÖŸá ⁄©ÿ¥Ÿàÿ±Ÿáÿß
        function selectAll() {
            selectedCountries = [...availableCountries];
            
            // ÿ®Ÿá ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄Ü⁄©‚Äåÿ®ÿß⁄©ÿ≥‚ÄåŸáÿß
            const checkboxes = document.querySelectorAll('#country-list .form-check-input');
            checkboxes.forEach(checkbox => {
                checkbox.checked = true;
            });
            
            updateAllCharts();
        }

        // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸáŸÖŸá ÿßŸÜÿ™ÿÆÿßÿ®‚ÄåŸáÿß
        function clearAll() {
            selectedCountries = [];
            
            // ÿ®Ÿá ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄Ü⁄©‚Äåÿ®ÿß⁄©ÿ≥‚ÄåŸáÿß
            const checkboxes = document.querySelectorAll('#country-list .form-check-input');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            
            updateAllCharts();
        }

        // ŸÖŸÇÿØÿßÿ±ÿØŸá€å ÿßŸàŸÑ€åŸá
        document.addEventListener('DOMContentLoaded', function() {
            // ÿß€åÿ¨ÿßÿØ ŸÑ€åÿ≥ÿ™ ⁄©ÿ¥Ÿàÿ±Ÿáÿß ÿØÿ± ⁄©ŸÜÿ™ÿ±ŸÑ‚ÄåŸáÿß
            updateCountryList();
            
            // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßŸàŸÑ€åŸá ŸáŸÖŸá ŸÜŸÖŸàÿØÿßÿ±Ÿáÿß
            updateAllCharts();
        });
    </script>
</body>
</html>
